# P2J-Python-collections-ä»€ä¹ˆæ˜¯namedtupleã€defaultdictå’ŒCounterï¼Ÿä¸ºä»€ä¹ˆä¸€çº¿å¼€å‘è€…éƒ½åœ¨ç”¨ï¼Ÿæ€ä¹ˆå¿«é€ŸæŒæ¡ï¼Ÿ

## ğŸ“ æ‘˜è¦

ä¸ºä»€ä¹ˆä¸€çº¿å¼€å‘è€…éƒ½åœ¨ç”¨ namedtupleã€defaultdict å’Œ Counterï¼Ÿæœ¬æ–‡æ¡£ç”¨ç”Ÿæ´»åŒ–æ¯”å–»è§£æè¿™ä¸‰ä¸ª collections å·¥å…·ï¼Œå¸®ä½ æŒæ¡é«˜æ•ˆçš„æ•°æ®å¤„ç†æŠ€å·§ï¼Œæå‡ä»£ç å¯è¯»æ€§å’Œæ€§èƒ½ã€‚

---

## ç›®å½•

- [1. å‰ç½®çŸ¥è¯†ç‚¹](#1-å‰ç½®çŸ¥è¯†ç‚¹)
- [2. ä»€ä¹ˆæ˜¯ collections æ¨¡å—ï¼Ÿ](#2-ä»€ä¹ˆæ˜¯-collections-æ¨¡å—)
- [3. namedtupleï¼ˆå‘½åå…ƒç»„ï¼‰ï¼šå¸¦åå­—çš„å…ƒç»„](#3-namedtupleå‘½åå…ƒç»„å¸¦åå­—çš„å…ƒç»„)
  - [3.1 namedtuple çš„åŸºæœ¬æ¦‚å¿µ](#31-namedtuple-çš„åŸºæœ¬æ¦‚å¿µ)
  - [3.2 ç”Ÿæ´»åŒ–æ¯”å–»](#32-ç”Ÿæ´»åŒ–æ¯”å–»)
  - [3.3 åˆ›å»º namedtuple](#33-åˆ›å»º-namedtuple)
  - [3.4 namedtuple çš„ä¼˜åŠ¿](#34-namedtuple-çš„ä¼˜åŠ¿)
  - [3.5 å®é™…åº”ç”¨åœºæ™¯](#35-å®é™…åº”ç”¨åœºæ™¯)
- [4. defaultdictï¼ˆé»˜è®¤å­—å…¸ï¼‰ï¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼çš„å­—å…¸](#4-defaultdicté»˜è®¤å­—å…¸è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼çš„å­—å…¸)
  - [4.1 defaultdict çš„åŸºæœ¬æ¦‚å¿µ](#41-defaultdict-çš„åŸºæœ¬æ¦‚å¿µ)
  - [4.2 ç”Ÿæ´»åŒ–æ¯”å–»](#42-ç”Ÿæ´»åŒ–æ¯”å–»)
  - [4.3 åˆ›å»º defaultdict](#43-åˆ›å»º-defaultdict)
  - [4.4 defaultdict çš„ä¼˜åŠ¿](#44-defaultdict-çš„ä¼˜åŠ¿)
  - [4.5 å®é™…åº”ç”¨åœºæ™¯](#45-å®é™…åº”ç”¨åœºæ™¯)
- [5. Counterï¼ˆè®¡æ•°å™¨ï¼‰ï¼šä¸“ä¸šçš„ç»Ÿè®¡å·¥å…·](#5-counterè®¡æ•°å™¨ä¸“ä¸šçš„ç»Ÿè®¡å·¥å…·)
  - [5.1 Counter çš„åŸºæœ¬æ¦‚å¿µ](#51-counter-çš„åŸºæœ¬æ¦‚å¿µ)
  - [5.2 ç”Ÿæ´»åŒ–æ¯”å–»](#52-ç”Ÿæ´»åŒ–æ¯”å–»)
  - [5.3 åˆ›å»º Counter](#53-åˆ›å»º-counter)
  - [5.4 Counter çš„å¸¸ç”¨æ–¹æ³•](#54-counter-çš„å¸¸ç”¨æ–¹æ³•)
  - [5.5 Counter çš„ä¼˜åŠ¿](#55-counter-çš„ä¼˜åŠ¿)
  - [5.6 å®é™…åº”ç”¨åœºæ™¯](#56-å®é™…åº”ç”¨åœºæ™¯)
- [6. å¯¹æ¯”ç¤ºä¾‹ï¼šä¸ä½¿ç”¨ collections çš„é—®é¢˜](#6-å¯¹æ¯”ç¤ºä¾‹ä¸ä½¿ç”¨-collections-çš„é—®é¢˜)
- [7. ä¸‰ç§å·¥å…·çš„é€‰æ‹©å»ºè®®](#7-ä¸‰ç§å·¥å…·çš„é€‰æ‹©å»ºè®®)
- [8. å¸¸è§é”™è¯¯ä¸ä¿®æ­£](#8-å¸¸è§é”™è¯¯ä¸ä¿®æ­£)
- [9. æ€»ç»“ä¸å±•æœ›](#9-æ€»ç»“ä¸å±•æœ›)
- [10. ğŸ“š å‚è€ƒèµ„æ–™ä¸å­¦ä¹ èµ„æº](#10-å‚è€ƒèµ„æ–™ä¸å­¦ä¹ èµ„æº)

---

## 1. å‰ç½®çŸ¥è¯†ç‚¹

### åŸºç¡€çŸ¥è¯†ç‚¹ï¼ˆå¿…é¡»æŒæ¡ï¼‰

åœ¨å­¦ä¹  collections æ¨¡å—ä¹‹å‰ï¼Œä½ éœ€è¦æŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š

- **åˆ—è¡¨ï¼ˆListï¼‰**ï¼šäº†è§£åˆ—è¡¨çš„åŸºæœ¬æ“ä½œï¼ˆå‚è€ƒ P2A æ–‡æ¡£ï¼‰
- **å­—å…¸ï¼ˆDictionaryï¼‰**ï¼šäº†è§£å­—å…¸çš„åŸºæœ¬æ“ä½œï¼ˆå‚è€ƒ P2D æ–‡æ¡£ï¼‰
- **å…ƒç»„ï¼ˆTupleï¼‰**ï¼šäº†è§£å…ƒç»„çš„åŸºæœ¬æ¦‚å¿µ
- **å‡½æ•°**ï¼šäº†è§£å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨ï¼ˆå‚è€ƒ P3A æ–‡æ¡£ï¼‰

### ğŸ¯ **å­¦ä¹ å»ºè®®**

- **é›¶åŸºç¡€å°ç™½**ï¼šå»ºè®®å…ˆå­¦ä¹ åˆ—è¡¨å’Œå­—å…¸çš„åŸºç¡€æ“ä½œï¼Œå†å­¦ä¹  collections æ¨¡å—
- **æœ‰åŸºç¡€è¯»è€…**ï¼šå¯ä»¥ç›´æ¥å­¦ä¹  collections æ¨¡å—çš„é«˜çº§ç”¨æ³•

---

## 2. ä»€ä¹ˆæ˜¯ collections æ¨¡å—ï¼Ÿ

### 2.1 collections æ¨¡å—çš„åŸºæœ¬å®šä¹‰

**collectionsï¼ˆé›†åˆï¼‰æ¨¡å—**æ˜¯ Python æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œæä¾›äº†è®¸å¤šæœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼ˆData Structureï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼‰ï¼Œè¿™äº›æ•°æ®ç»“æ„æ˜¯å¯¹å†…ç½®æ•°æ®ç±»å‹ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ï¼‰çš„æ‰©å±•å’Œå¢å¼ºã€‚

**collections æ¨¡å—çš„ç‰¹ç‚¹**ï¼š
- **æ‰©å±•æ€§å¼º**ï¼šæä¾›äº†å†…ç½®æ•°æ®ç»“æ„çš„å¢å¼ºç‰ˆæœ¬
- **é«˜æ•ˆå®ç”¨**ï¼šé’ˆå¯¹ç‰¹å®šåœºæ™¯ä¼˜åŒ–æ€§èƒ½
- **æ˜“äºä½¿ç”¨**ï¼šAPI ç®€å•ç›´è§‚
- **åŠŸèƒ½å¼ºå¤§**ï¼šè§£å†³å®é™…ç¼–ç¨‹ä¸­çš„å¸¸è§é—®é¢˜

### 2.2 ç”Ÿæ´»åŒ–æ¯”å–»

**ç”Ÿæ´»åŒ–æ¯”å–»**ï¼šcollections æ¨¡å—å°±åƒ**ä¸“ä¸šå·¥å…·ç®±**ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼š
- **å†…ç½®æ•°æ®ç±»å‹**ï¼ˆlistã€dictã€tupleï¼‰= æ™®é€šå·¥å…·ç®±ï¼ˆåŸºç¡€å·¥å…·ï¼‰
- **collections æ¨¡å—** = ä¸“ä¸šå·¥å…·ç®±ï¼ˆé«˜çº§å·¥å…·ï¼‰
  - `namedtuple` = å¸¦æ ‡ç­¾çš„å‚¨ç‰©ç›’ï¼ˆçŸ¥é“é‡Œé¢è£…çš„æ˜¯ä»€ä¹ˆï¼‰
  - `defaultdict` = è‡ªåŠ¨è¡¥å……çš„ä»“åº“ï¼ˆç¼ºå°‘ä»€ä¹ˆè‡ªåŠ¨è¡¥ä¸Šï¼‰
  - `Counter` = ä¸“ä¸šçš„ç»Ÿè®¡å™¨ï¼ˆè‡ªåŠ¨è®¡æ•°ï¼‰

**å¦ä¸€ä¸ªæ¯”å–»**ï¼š
- **å†…ç½®æ•°æ®ç±»å‹** = æ™®é€šæ±½è½¦ï¼ˆåŸºæœ¬åŠŸèƒ½ï¼‰
- **collections æ¨¡å—** = ä¸“ä¸šèµ›è½¦ï¼ˆé«˜æ€§èƒ½ã€é’ˆå¯¹ç‰¹å®šåœºæ™¯ä¼˜åŒ–ï¼‰

### 2.3 collections æ¨¡å—åŒ…å«çš„å·¥å…·

collections æ¨¡å—åŒ…å«ä»¥ä¸‹å¸¸ç”¨å·¥å…·ï¼š

| å·¥å…· | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| **namedtuple** | å¸¦å­—æ®µåçš„å…ƒç»„ | éœ€è¦ä¸ºå…ƒç»„å…ƒç´ å‘½åï¼Œæé«˜ä»£ç å¯è¯»æ€§ |
| **defaultdict** | å¸¦é»˜è®¤å€¼çš„å­—å…¸ | éœ€è¦è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼ï¼Œé¿å… KeyError |
| **Counter** | è®¡æ•°å™¨ | éœ€è¦ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•° |
| **deque** | åŒç«¯é˜Ÿåˆ— | éœ€è¦é«˜æ•ˆçš„é˜Ÿåˆ—æ“ä½œï¼ˆæœ¬çŸ¥è¯†ç‚¹ä¸æ¶‰åŠï¼Œè§ P2Kï¼‰ |
| **OrderedDict** | æœ‰åºå­—å…¸ | éœ€è¦ä¿æŒæ’å…¥é¡ºåºï¼ˆæœ¬çŸ¥è¯†ç‚¹ä¸æ¶‰åŠï¼Œè§ P2Kï¼‰ |

**æœ¬æ–‡æ¡£é‡ç‚¹è®²è§£**ï¼šnamedtupleã€defaultdictã€Counter è¿™ä¸‰ä¸ªæœ€å¸¸ç”¨çš„å·¥å…·ã€‚

---

## 3. namedtupleï¼ˆå‘½åå…ƒç»„ï¼‰ï¼šå¸¦åå­—çš„å…ƒç»„

### 3.1 namedtuple çš„åŸºæœ¬æ¦‚å¿µ

**namedtupleï¼ˆå‘½åå…ƒç»„ï¼‰**æ˜¯ collections æ¨¡å—æä¾›çš„ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼ˆFactory Functionï¼ˆå·¥å‚å‡½æ•°ï¼‰ï¼‰ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå¸¦å­—æ®µåçš„å…ƒç»„å­ç±»ã€‚å®ƒç»“åˆäº†å…ƒç»„çš„ä¸å¯å˜æ€§å’Œå­—å…¸çš„å¯è¯»æ€§ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚

**namedtuple çš„ç‰¹ç‚¹**ï¼š
- **ä¸å¯å˜æ€§**ï¼šå’Œæ™®é€šå…ƒç»„ä¸€æ ·ï¼Œåˆ›å»ºåä¸èƒ½ä¿®æ”¹
- **å¯è¯»æ€§**ï¼šå¯ä»¥é€šè¿‡å­—æ®µåè®¿é—®å…ƒç´ ï¼Œè€Œä¸åªæ˜¯ç´¢å¼•
- **å†…å­˜æ•ˆç‡**ï¼šæ¯”æ™®é€šç±»å ç”¨çš„å†…å­˜æ›´å°‘
- **å…¼å®¹æ€§**ï¼šå¯ä»¥åƒæ™®é€šå…ƒç»„ä¸€æ ·ä½¿ç”¨ç´¢å¼•è®¿é—®

### 3.2 ç”Ÿæ´»åŒ–æ¯”å–»

**ç”Ÿæ´»åŒ–æ¯”å–»**ï¼šnamedtuple å°±åƒ**å¸¦æ ‡ç­¾çš„å‚¨ç‰©ç›’**ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼š
- **æ™®é€šå…ƒç»„** = æ²¡æœ‰æ ‡ç­¾çš„ç›’å­ï¼ˆåªèƒ½é€šè¿‡ä½ç½®çŸ¥é“æ˜¯ä»€ä¹ˆï¼š`box[0]`ã€`box[1]`ï¼‰
- **namedtuple** = å¸¦æ ‡ç­¾çš„ç›’å­ï¼ˆå¯ä»¥é€šè¿‡æ ‡ç­¾çŸ¥é“æ˜¯ä»€ä¹ˆï¼š`box.name`ã€`box.age`ï¼‰

**å¦ä¸€ä¸ªæ¯”å–»**ï¼š
- **æ™®é€šå…ƒç»„** = åŒ¿åå¿«é€’åŒ…è£¹ï¼ˆåªèƒ½é€šè¿‡ç¼–å·æŸ¥æ‰¾ï¼‰
- **namedtuple** = æœ‰æ”¶ä»¶äººå§“åçš„å¿«é€’åŒ…è£¹ï¼ˆå¯ä»¥ç›´æ¥é€šè¿‡å§“åæŸ¥æ‰¾ï¼‰

### 3.3 åˆ›å»º namedtuple

**åŸºæœ¬è¯­æ³•**ï¼š

```python
from collections import namedtuple

# åˆ›å»ºä¸€ä¸ª namedtuple ç±»å‹
ç±»å‹å = namedtuple('ç±»å‹å', ['å­—æ®µ1', 'å­—æ®µ2', ...])

# åˆ›å»ºå®ä¾‹
å®ä¾‹ = ç±»å‹å(å€¼1, å€¼2, ...)
```

**å®é™…ç¤ºä¾‹**ï¼š

```python
from collections import namedtuple

# åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºåæ ‡ç‚¹çš„ namedtuple
Point = namedtuple('Point', ['x', 'y'])

# åˆ›å»ºåæ ‡ç‚¹å®ä¾‹
p1 = Point(1, 2)
p2 = Point(x=3, y=4)  # ä¹Ÿå¯ä»¥ä½¿ç”¨å…³é”®å­—å‚æ•°

# é€šè¿‡å­—æ®µåè®¿é—®ï¼ˆæ¨èï¼‰
print(f"x åæ ‡ï¼š{p1.x}")  # è¾“å‡ºï¼šx åæ ‡ï¼š1
print(f"y åæ ‡ï¼š{p1.y}")  # è¾“å‡ºï¼šy åæ ‡ï¼š2

# ä¹Ÿå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®ï¼ˆå…¼å®¹æ™®é€šå…ƒç»„ï¼‰
print(f"x åæ ‡ï¼š{p1[0]}")  # è¾“å‡ºï¼šx åæ ‡ï¼š1
print(f"y åæ ‡ï¼š{p1[1]}")  # è¾“å‡ºï¼šy åæ ‡ï¼š2

# å¯ä»¥åƒæ™®é€šå…ƒç»„ä¸€æ ·è§£åŒ…
x, y = p1
print(f"x={x}, y={y}")  # è¾“å‡ºï¼šx=1, y=2
```

**å­—æ®µåçš„æŒ‡å®šæ–¹å¼**ï¼š

```python
from collections import namedtuple

# æ–¹å¼1ï¼šä½¿ç”¨åˆ—è¡¨ï¼ˆæ¨èï¼‰
Person = namedtuple('Person', ['name', 'age', 'city'])

# æ–¹å¼2ï¼šä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆç”¨ç©ºæ ¼æˆ–é€—å·åˆ†éš”ï¼‰
Person = namedtuple('Person', 'name age city')
Person = namedtuple('Person', 'name, age, city')

# åˆ›å»ºå®ä¾‹
p = Person('å¼ ä¸‰', 25, 'åŒ—äº¬')
print(f"å§“åï¼š{p.name}ï¼Œå¹´é¾„ï¼š{p.age}ï¼ŒåŸå¸‚ï¼š{p.city}")
# è¾“å‡ºï¼šå§“åï¼šå¼ ä¸‰ï¼Œå¹´é¾„ï¼š25ï¼ŒåŸå¸‚ï¼šåŒ—äº¬
```

### 3.4 namedtuple çš„ä¼˜åŠ¿

**å¯¹æ¯”ç¤ºä¾‹**ï¼š

**ä¸ä½¿ç”¨ namedtupleï¼ˆæ™®é€šå…ƒç»„ï¼‰çš„é—®é¢˜**ï¼š

```python
# ä½¿ç”¨æ™®é€šå…ƒç»„ï¼Œä¸çŸ¥é“æ¯ä¸ªä½ç½®ä»£è¡¨ä»€ä¹ˆ
student1 = ('å¼ ä¸‰', 18, 'åŒ—äº¬', 'é«˜ä¸‰')
print(f"å§“åï¼š{student1[0]}")  # âŒ ä¸ç›´è§‚ï¼Œéœ€è¦è®°ä½ç´¢å¼•å«ä¹‰
print(f"å¹´é¾„ï¼š{student1[1]}")  # âŒ å®¹æ˜“å‡ºé”™ï¼Œç´¢å¼•æ··æ·†
```

**ä½¿ç”¨ namedtuple çš„ä¼˜åŠ¿**ï¼š

```python
from collections import namedtuple

# ä½¿ç”¨ namedtupleï¼Œä»£ç æ›´æ¸…æ™°
Student = namedtuple('Student', ['name', 'age', 'city', 'grade'])
student1 = Student('å¼ ä¸‰', 18, 'åŒ—äº¬', 'é«˜ä¸‰')
print(f"å§“åï¼š{student1.name}")   # âœ… ç›´è§‚æ˜äº†
print(f"å¹´é¾„ï¼š{student1.age}")    # âœ… ä¸ä¼šæ··æ·†
print(f"åŸå¸‚ï¼š{student1.city}")   # âœ… å¯è¯»æ€§å¼º
```

**ä¼˜åŠ¿æ€»ç»“**ï¼š

| ç‰¹æ€§ | æ™®é€šå…ƒç»„ | namedtuple |
|------|---------|-----------|
| **å¯è¯»æ€§** | âŒ éœ€è¦è®°ä½ç´¢å¼•å«ä¹‰ | âœ… å­—æ®µåæ¸…æ™°æ˜äº† |
| **å®‰å…¨æ€§** | âŒ å®¹æ˜“ç´¢å¼•é”™è¯¯ | âœ… å­—æ®µåä¸å®¹æ˜“å†™é”™ |
| **ç»´æŠ¤æ€§** | âŒ ä¿®æ”¹å­—æ®µé¡ºåºå½±å“å¤§ | âœ… å­—æ®µåä¸å˜ï¼Œé¡ºåºå¯å˜ |
| **æ€§èƒ½** | âœ… æ€§èƒ½ç›¸åŒ | âœ… æ€§èƒ½ç›¸åŒ |
| **å…¼å®¹æ€§** | âœ… åŸºç¡€ç±»å‹ | âœ… å®Œå…¨å…¼å®¹å…ƒç»„æ“ä½œ |

### 3.5 å®é™…åº”ç”¨åœºæ™¯

**åœºæ™¯ 1ï¼šè¡¨ç¤ºåæ ‡ç‚¹**

```python
from collections import namedtuple

Point = namedtuple('Point', ['x', 'y'])
p1 = Point(0, 0)
p2 = Point(3, 4)

# è®¡ç®—ä¸¤ç‚¹è·ç¦»
distance = ((p2.x - p1.x)**2 + (p2.y - p1.y)**2)**0.5
print(f"è·ç¦»ï¼š{distance}")  # è¾“å‡ºï¼šè·ç¦»ï¼š5.0
```

**åœºæ™¯ 2ï¼šè¡¨ç¤ºå­¦ç”Ÿä¿¡æ¯**

```python
from collections import namedtuple

Student = namedtuple('Student', ['name', 'age', 'score'])
students = [
    Student('å¼ ä¸‰', 18, 85),
    Student('æå››', 19, 92),
    Student('ç‹äº”', 18, 78)
]

# æŸ¥æ‰¾é«˜åˆ†å­¦ç”Ÿ
high_score_students = [s for s in students if s.score >= 90]
for student in high_score_students:
    print(f"{student.name}ï¼š{student.score} åˆ†")
```

**åœºæ™¯ 3ï¼šå‡½æ•°è¿”å›å¤šä¸ªå€¼**

```python
from collections import namedtuple

# å®šä¹‰è¿”å›ç»“æœç±»å‹
Result = namedtuple('Result', ['success', 'message', 'data'])

def process_data(data):
    if not data:
        return Result(False, "æ•°æ®ä¸ºç©º", None)
    return Result(True, "å¤„ç†æˆåŠŸ", data.upper())

# ä½¿ç”¨
result = process_data("hello")
if result.success:
    print(f"{result.message}ï¼š{result.data}")  # âœ… ä»£ç æ¸…æ™°
```

---

## 4. defaultdictï¼ˆé»˜è®¤å­—å…¸ï¼‰ï¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼çš„å­—å…¸

### 4.1 defaultdict çš„åŸºæœ¬æ¦‚å¿µ

**defaultdictï¼ˆé»˜è®¤å­—å…¸ï¼‰**æ˜¯ collections æ¨¡å—æä¾›çš„ä¸€ä¸ªå­—å…¸å­ç±»ï¼Œå®ƒç»§æ‰¿è‡ªå†…ç½®çš„ `dict` ç±»ï¼Œä½†å¢åŠ äº†ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šå½“è®¿é—®ä¸å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯æŠ›å‡º `KeyError` å¼‚å¸¸ã€‚

**defaultdict çš„ç‰¹ç‚¹**ï¼š
- **è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼**ï¼šè®¿é—®ä¸å­˜åœ¨çš„é”®æ—¶è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼
- **é¿å… KeyError**ï¼šä¸ä¼šå› ä¸ºè®¿é—®ä¸å­˜åœ¨çš„é”®è€ŒæŠ¥é”™
- **æé«˜ä»£ç ç®€æ´æ€§**ï¼šå‡å°‘ if åˆ¤æ–­å’Œå¼‚å¸¸å¤„ç†
- **å®Œå…¨å…¼å®¹å­—å…¸**ï¼šå¯ä»¥åƒæ™®é€šå­—å…¸ä¸€æ ·ä½¿ç”¨

### 4.2 ç”Ÿæ´»åŒ–æ¯”å–»

**ç”Ÿæ´»åŒ–æ¯”å–»**ï¼šdefaultdict å°±åƒ**è‡ªåŠ¨è¡¥å……çš„ä»“åº“**ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼š
- **æ™®é€šå­—å…¸** = æ™®é€šä»“åº“ï¼ˆå¦‚æœæ²¡æœ‰è´§ç‰©ï¼Œå–è´§æ—¶ä¼šæŠ¥é”™ï¼‰
- **defaultdict** = è‡ªåŠ¨è¡¥å……ä»“åº“ï¼ˆå¦‚æœæ²¡æœ‰è´§ç‰©ï¼Œä¼šè‡ªåŠ¨è¡¥ä¸Šé»˜è®¤è´§ç‰©ï¼‰

**å¦ä¸€ä¸ªæ¯”å–»**ï¼š
- **æ™®é€šå­—å…¸** = æ™®é€šä¹¦æ¶ï¼ˆæ‰¾ä¹¦æ—¶å¦‚æœæ²¡æœ‰ä¼šæŠ¥é”™ï¼‰
- **defaultdict** = æ™ºèƒ½ä¹¦æ¶ï¼ˆæ‰¾ä¹¦æ—¶å¦‚æœæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºç©ºä¹¦æ¶ï¼‰

### 4.3 åˆ›å»º defaultdict

**åŸºæœ¬è¯­æ³•**ï¼š

```python
from collections import defaultdict

# åˆ›å»ºä¸€ä¸ª defaultdictï¼ŒæŒ‡å®šé»˜è®¤å€¼å·¥å‚å‡½æ•°
d = defaultdict(é»˜è®¤å€¼å·¥å‚å‡½æ•°)

# å¸¸ç”¨çš„é»˜è®¤å€¼å·¥å‚å‡½æ•°
d1 = defaultdict(int)      # é»˜è®¤å€¼ä¸º 0
d2 = defaultdict(list)     # é»˜è®¤å€¼ä¸ºç©ºåˆ—è¡¨ []
d3 = defaultdict(set)      # é»˜è®¤å€¼ä¸ºç©ºé›†åˆ set()
d4 = defaultdict(str)      # é»˜è®¤å€¼ä¸ºç©ºå­—ç¬¦ä¸² ""
d5 = defaultdict(lambda: "æœªçŸ¥")  # é»˜è®¤å€¼ä¸ºè‡ªå®šä¹‰å€¼
```

**å®é™…ç¤ºä¾‹**ï¼š

```python
from collections import defaultdict

# ç¤ºä¾‹ 1ï¼šä½¿ç”¨ int ä½œä¸ºé»˜è®¤å€¼ï¼ˆé»˜è®¤å€¼ä¸º 0ï¼‰
scores = defaultdict(int)
scores['å¼ ä¸‰'] = 85
print(scores['å¼ ä¸‰'])  # è¾“å‡ºï¼š85
print(scores['æå››'])  # è¾“å‡ºï¼š0ï¼ˆè‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼ï¼Œä¸ä¼šæŠ¥é”™ï¼‰

# ç¤ºä¾‹ 2ï¼šä½¿ç”¨ list ä½œä¸ºé»˜è®¤å€¼ï¼ˆé»˜è®¤å€¼ä¸ºç©ºåˆ—è¡¨ï¼‰
groups = defaultdict(list)
groups['å­¦ç”Ÿ'].append('å¼ ä¸‰')
groups['å­¦ç”Ÿ'].append('æå››')
print(groups['å­¦ç”Ÿ'])  # è¾“å‡ºï¼š['å¼ ä¸‰', 'æå››']
print(groups['è€å¸ˆ'])  # è¾“å‡ºï¼š[]ï¼ˆè‡ªåŠ¨åˆ›å»ºç©ºåˆ—è¡¨ï¼‰

# ç¤ºä¾‹ 3ï¼šä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°ä½œä¸ºé»˜è®¤å€¼
info = defaultdict(lambda: "æœªçŸ¥")
print(info['åŸå¸‚'])  # è¾“å‡ºï¼šæœªçŸ¥
```

### 4.4 defaultdict çš„ä¼˜åŠ¿

**å¯¹æ¯”ç¤ºä¾‹**ï¼š

**ä¸ä½¿ç”¨ defaultdictï¼ˆæ™®é€šå­—å…¸ï¼‰çš„é—®é¢˜**ï¼š

```python
# ç»Ÿè®¡å•è¯å‡ºç°æ¬¡æ•°
words = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple']
word_count = {}

# âŒ éœ€è¦æ‰‹åŠ¨æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
for word in words:
    if word in word_count:
        word_count[word] += 1
    else:
        word_count[word] = 1

print(word_count)  # è¾“å‡ºï¼š{'apple': 3, 'banana': 2, 'orange': 1}
```

**ä½¿ç”¨ defaultdict çš„ä¼˜åŠ¿**ï¼š

```python
from collections import defaultdict

words = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple']
word_count = defaultdict(int)

# âœ… ä¸éœ€è¦æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ï¼Œç›´æ¥æ“ä½œ
for word in words:
    word_count[word] += 1  # è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼ 0ï¼Œç„¶ååŠ  1

print(dict(word_count))  # è¾“å‡ºï¼š{'apple': 3, 'banana': 2, 'orange': 1}
```

**å¦ä¸€ä¸ªå¯¹æ¯”ç¤ºä¾‹**ï¼š

**ä¸ä½¿ç”¨ defaultdictï¼ˆæŒ‰ç±»åˆ«åˆ†ç»„ï¼‰**ï¼š

```python
# æŒ‰åŸå¸‚åˆ†ç»„å­¦ç”Ÿ
students = [
    ('å¼ ä¸‰', 'åŒ—äº¬'),
    ('æå››', 'ä¸Šæµ·'),
    ('ç‹äº”', 'åŒ—äº¬'),
    ('èµµå…­', 'å¹¿å·')
]

city_students = {}

# âŒ éœ€è¦æ‰‹åŠ¨æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
for name, city in students:
    if city not in city_students:
        city_students[city] = []
    city_students[city].append(name)

print(city_students)  # è¾“å‡ºï¼š{'åŒ—äº¬': ['å¼ ä¸‰', 'ç‹äº”'], 'ä¸Šæµ·': ['æå››'], 'å¹¿å·': ['èµµå…­']}
```

**ä½¿ç”¨ defaultdict çš„ä¼˜åŠ¿**ï¼š

```python
from collections import defaultdict

students = [
    ('å¼ ä¸‰', 'åŒ—äº¬'),
    ('æå››', 'ä¸Šæµ·'),
    ('ç‹äº”', 'åŒ—äº¬'),
    ('èµµå…­', 'å¹¿å·')
]

city_students = defaultdict(list)

# âœ… ä¸éœ€è¦æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ï¼Œç›´æ¥è¿½åŠ 
for name, city in students:
    city_students[city].append(name)

print(dict(city_students))  # è¾“å‡ºï¼š{'åŒ—äº¬': ['å¼ ä¸‰', 'ç‹äº”'], 'ä¸Šæµ·': ['æå››'], 'å¹¿å·': ['èµµå…­']}
```

**ä¼˜åŠ¿æ€»ç»“**ï¼š

| ç‰¹æ€§ | æ™®é€šå­—å…¸ | defaultdict |
|------|---------|------------|
| **ä»£ç ç®€æ´æ€§** | âŒ éœ€è¦ if åˆ¤æ–­ | âœ… ä»£ç æ›´ç®€æ´ |
| **é”™è¯¯å¤„ç†** | âŒ éœ€è¦å¤„ç† KeyError | âœ… è‡ªåŠ¨å¤„ç†ï¼Œä¸ä¼šæŠ¥é”™ |
| **æ€§èƒ½** | âœ… ç›¸åŒ | âœ… ç›¸åŒ |
| **å¯è¯»æ€§** | âš ï¸ ä»£ç å†—é•¿ | âœ… ä»£ç ç®€æ´æ˜äº† |

### 4.5 å®é™…åº”ç”¨åœºæ™¯

**åœºæ™¯ 1ï¼šç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°**

```python
from collections import defaultdict

# ç»Ÿè®¡åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°
numbers = [1, 2, 3, 2, 1, 3, 1, 1, 2]
count = defaultdict(int)

for num in numbers:
    count[num] += 1

print(dict(count))  # è¾“å‡ºï¼š{1: 4, 2: 3, 3: 2}
```

**åœºæ™¯ 2ï¼šæŒ‰ç±»åˆ«åˆ†ç»„**

```python
from collections import defaultdict

# æŒ‰éƒ¨é—¨åˆ†ç»„å‘˜å·¥
employees = [
    ('å¼ ä¸‰', 'æŠ€æœ¯éƒ¨'),
    ('æå››', 'é”€å”®éƒ¨'),
    ('ç‹äº”', 'æŠ€æœ¯éƒ¨'),
    ('èµµå…­', 'äººäº‹éƒ¨'),
    ('å­™ä¸ƒ', 'æŠ€æœ¯éƒ¨')
]

dept_employees = defaultdict(list)
for name, dept in employees:
    dept_employees[dept].append(name)

for dept, names in dept_employees.items():
    print(f"{dept}ï¼š{', '.join(names)}")
# è¾“å‡ºï¼š
# æŠ€æœ¯éƒ¨ï¼šå¼ ä¸‰, ç‹äº”, å­™ä¸ƒ
# é”€å”®éƒ¨ï¼šæå››
# äººäº‹éƒ¨ï¼šèµµå…­
```

**åœºæ™¯ 3ï¼šæ„å»ºç´¢å¼•**

```python
from collections import defaultdict

# ä¸ºæ–‡æ¡£ä¸­çš„å•è¯æ„å»ºä½ç½®ç´¢å¼•
documents = [
    "Python is great",
    "Python is easy",
    "Python is powerful"
]

word_positions = defaultdict(list)
for doc_id, doc in enumerate(documents):
    words = doc.split()
    for position, word in enumerate(words):
        word_positions[word.lower()].append((doc_id, position))

print(word_positions['python'])  # è¾“å‡ºï¼š[(0, 0), (1, 0), (2, 0)]
```

---


## 5. Counterï¼ˆè®¡æ•°å™¨ï¼‰ï¼šä¸“ä¸šçš„ç»Ÿè®¡å·¥å…·

### 5.1 Counter çš„åŸºæœ¬æ¦‚å¿µ

**Counterï¼ˆè®¡æ•°å™¨ï¼‰**æ˜¯ collections æ¨¡å—æä¾›çš„ä¸€ä¸ªå­—å…¸å­ç±»ï¼Œä¸“é—¨ç”¨äºç»Ÿè®¡å¯å“ˆå¸Œï¼ˆHashableï¼ˆå¯å“ˆå¸Œï¼‰ï¼‰å¯¹è±¡çš„å‡ºç°æ¬¡æ•°ã€‚å®ƒå°†å…ƒç´ ä½œä¸ºé”®ï¼ˆKeyï¼‰ï¼Œå‡ºç°æ¬¡æ•°ä½œä¸ºå€¼ï¼ˆValueï¼‰ï¼Œæä¾›äº†ä¾¿æ·çš„è®¡æ•°åŠŸèƒ½ã€‚

**Counter çš„ç‰¹ç‚¹**ï¼š
- **è‡ªåŠ¨è®¡æ•°**ï¼šè‡ªåŠ¨ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°
- **åŠŸèƒ½ä¸°å¯Œ**ï¼šæä¾›äº†å¤šç§ç»Ÿè®¡å’Œæ“ä½œæ–¹æ³•
- **é«˜æ•ˆä¾¿æ·**ï¼šæ¯”æ‰‹åŠ¨å¾ªç¯è®¡æ•°æ›´ç®€æ´é«˜æ•ˆ
- **å…¼å®¹å­—å…¸**ï¼šå®Œå…¨å…¼å®¹å­—å…¸çš„æ‰€æœ‰æ“ä½œ

### 5.2 ç”Ÿæ´»åŒ–æ¯”å–»

**ç”Ÿæ´»åŒ–æ¯”å–»**ï¼šCounter å°±åƒ**ä¸“ä¸šçš„ç»Ÿè®¡å™¨**ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼š
- **æ‰‹åŠ¨è®¡æ•°** = äººå·¥æ•°æ•°ï¼ˆå®¹æ˜“å‡ºé”™ï¼Œæ•ˆç‡ä½ï¼‰
- **Counter** = è‡ªåŠ¨è®¡æ•°å™¨ï¼ˆå‡†ç¡®å¿«é€Ÿï¼ŒåŠŸèƒ½å¼ºå¤§ï¼‰

**å¦ä¸€ä¸ªæ¯”å–»**ï¼š
- **æ‰‹åŠ¨ç»Ÿè®¡** = æ‰‹å·¥è®°è´¦ï¼ˆä¸€ä¸ªä¸ªæ•°ï¼‰
- **Counter** = ç”µå­è®°è´¦å™¨ï¼ˆè‡ªåŠ¨ç»Ÿè®¡ï¼Œè¿˜èƒ½æ’åºã€ç­›é€‰ï¼‰

### 5.3 åˆ›å»º Counter

**åŸºæœ¬è¯­æ³•**ï¼š

```python
from collections import Counter

# åˆ›å»º Counter å¯¹è±¡
c = Counter(å¯è¿­ä»£å¯¹è±¡)
c = Counter({'é”®1': å€¼1, 'é”®2': å€¼2})  # ä»å­—å…¸åˆ›å»º
c = Counter(é”®1=å€¼1, é”®2=å€¼2)  # ä½¿ç”¨å…³é”®å­—å‚æ•°
```

**å®é™…ç¤ºä¾‹**ï¼š

```python
from collections import Counter

# ç¤ºä¾‹ 1ï¼šç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„å‡ºç°æ¬¡æ•°
text = "abracadabra"
c1 = Counter(text)
print(c1)  # è¾“å‡ºï¼šCounter({'a': 5, 'b': 2, 'r': 2, 'c': 1, 'd': 1})

# ç¤ºä¾‹ 2ï¼šç»Ÿè®¡åˆ—è¡¨ä¸­å…ƒç´ çš„å‡ºç°æ¬¡æ•°
numbers = [1, 2, 3, 2, 1, 3, 1, 1, 2]
c2 = Counter(numbers)
print(c2)  # è¾“å‡ºï¼šCounter({1: 4, 2: 3, 3: 2})

# ç¤ºä¾‹ 3ï¼šä»å­—å…¸åˆ›å»º
c3 = Counter({'a': 3, 'b': 2, 'c': 1})
print(c3)  # è¾“å‡ºï¼šCounter({'a': 3, 'b': 2, 'c': 1})

# ç¤ºä¾‹ 4ï¼šä½¿ç”¨å…³é”®å­—å‚æ•°åˆ›å»º
c4 = Counter(a=3, b=2, c=1)
print(c4)  # è¾“å‡ºï¼šCounter({'a': 3, 'b': 2, 'c': 1})
```

### 5.4 Counter çš„å¸¸ç”¨æ–¹æ³•

**ä¸»è¦æ–¹æ³•**ï¼š

| æ–¹æ³• | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **most_common(n)** | è¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„ n ä¸ªå…ƒç´  | `c.most_common(3)` |
| **update(iterable)** | æ›´æ–°è®¡æ•°å™¨ï¼Œå¢åŠ å…ƒç´ è®¡æ•° | `c.update(['a', 'b', 'a'])` |
| **elements()** | è¿”å›æ‰€æœ‰å…ƒç´ çš„è¿­ä»£å™¨ | `list(c.elements())` |
| **subtract(iterable)** | å‡å°‘å…ƒç´ è®¡æ•° | `c.subtract(['a', 'b'])` |
| **total()** | è¿”å›æ‰€æœ‰è®¡æ•°çš„æ€»å’Œï¼ˆPython 3.10+ï¼‰ | `c.total()` |

**å®é™…ç¤ºä¾‹**ï¼š

```python
from collections import Counter

c = Counter('abracadabra')
print(f"å®Œæ•´è®¡æ•°ï¼š{c}")  # è¾“å‡ºï¼šCounter({'a': 5, 'b': 2, 'r': 2, 'c': 1, 'd': 1})

# most_common()ï¼šè·å–å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ 
print(f"å‡ºç°æœ€å¤šçš„ 3 ä¸ªï¼š{c.most_common(3)}")  # è¾“å‡ºï¼š[('a', 5), ('b', 2), ('r', 2)]
print(f"å‡ºç°æœ€å¤šçš„ 1 ä¸ªï¼š{c.most_common(1)}")  # è¾“å‡ºï¼š[('a', 5)]

# update()ï¼šæ›´æ–°è®¡æ•°å™¨
c.update('aaaaazzz')
print(f"æ›´æ–°åï¼š{c}")  # è¾“å‡ºï¼šCounter({'a': 10, 'z': 3, 'b': 2, 'r': 2, 'c': 1, 'd': 1})

# elements()ï¼šè¿”å›æ‰€æœ‰å…ƒç´ ï¼ˆæŒ‰è®¡æ•°é‡å¤ï¼‰
elements = list(c.elements())
print(f"æ‰€æœ‰å…ƒç´ ï¼š{elements}")  # è¾“å‡ºï¼šåŒ…å« 10 ä¸ª 'a'ã€3 ä¸ª 'z'ã€2 ä¸ª 'b' ç­‰

# subtract()ï¼šå‡å°‘è®¡æ•°
c.subtract('aaaa')
print(f"å‡å°‘åï¼š{c}")  # è¾“å‡ºï¼šCounter({'a': 6, 'z': 3, 'b': 2, 'r': 2, 'c': 1, 'd': 1})

# è®¿é—®å•ä¸ªå…ƒç´ çš„è®¡æ•°
print(f"'a' å‡ºç°æ¬¡æ•°ï¼š{c['a']}")  # è¾“å‡ºï¼š'a' å‡ºç°æ¬¡æ•°ï¼š6
print(f"'x' å‡ºç°æ¬¡æ•°ï¼š{c['x']}")  # è¾“å‡ºï¼š'x' å‡ºç°æ¬¡æ•°ï¼š0ï¼ˆä¸å­˜åœ¨è¿”å› 0ï¼Œä¸ä¼šæŠ¥é”™ï¼‰

# Counter æ”¯æŒæ•°å­¦è¿ç®—
c1 = Counter(a=3, b=2)
c2 = Counter(a=1, b=3)
print(f"ç›¸åŠ ï¼š{c1 + c2}")  # è¾“å‡ºï¼šCounter({'b': 5, 'a': 4})
print(f"ç›¸å‡ï¼š{c1 - c2}")  # è¾“å‡ºï¼šCounter({'a': 2})
print(f"å–äº¤é›†ï¼š{c1 & c2}")  # è¾“å‡ºï¼šCounter({'a': 1, 'b': 2})ï¼ˆå–è¾ƒå°å€¼ï¼‰
print(f"å–å¹¶é›†ï¼š{c1 | c2}")  # è¾“å‡ºï¼šCounter({'a': 3, 'b': 3})ï¼ˆå–è¾ƒå¤§å€¼ï¼‰
```

### 5.5 Counter çš„ä¼˜åŠ¿

**å¯¹æ¯”ç¤ºä¾‹**ï¼š

**ä¸ä½¿ç”¨ Counterï¼ˆæ‰‹åŠ¨ç»Ÿè®¡ï¼‰çš„é—®é¢˜**ï¼š

```python
# ç»Ÿè®¡å•è¯å‡ºç°æ¬¡æ•°
words = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple', 'grape']
word_count = {}

# âŒ éœ€è¦æ‰‹åŠ¨å¾ªç¯å’Œåˆ¤æ–­
for word in words:
    if word in word_count:
        word_count[word] += 1
    else:
        word_count[word] = 1

# âŒ éœ€è¦æ‰‹åŠ¨æ’åºè·å–æœ€å¤šçš„
sorted_words = sorted(word_count.items(), key=lambda x: x[1], reverse=True)
top_3 = sorted_words[:3]
print(top_3)  # è¾“å‡ºï¼š[('apple', 3), ('banana', 2), ('orange', 1)]
```

**ä½¿ç”¨ Counter çš„ä¼˜åŠ¿**ï¼š

```python
from collections import Counter

words = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple', 'grape']

# âœ… ä¸€è¡Œä»£ç å®Œæˆç»Ÿè®¡
word_count = Counter(words)
print(word_count)  # è¾“å‡ºï¼šCounter({'apple': 3, 'banana': 2, 'orange': 1, 'grape': 1})

# âœ… ç›´æ¥è·å–å‡ºç°æœ€å¤šçš„å…ƒç´ 
top_3 = word_count.most_common(3)
print(top_3)  # è¾“å‡ºï¼š[('apple', 3), ('banana', 2), ('orange', 1)]
```

**ä¼˜åŠ¿æ€»ç»“**ï¼š

| ç‰¹æ€§ | æ‰‹åŠ¨ç»Ÿè®¡ | Counter |
|------|---------|---------|
| **ä»£ç ç®€æ´æ€§** | âŒ éœ€è¦å¾ªç¯å’Œåˆ¤æ–­ | âœ… ä¸€è¡Œä»£ç å®Œæˆ |
| **åŠŸèƒ½ä¸°å¯Œæ€§** | âŒ éœ€è¦æ‰‹åŠ¨å®ç°æ’åºç­‰åŠŸèƒ½ | âœ… æä¾›ä¸°å¯Œçš„ç»Ÿè®¡æ–¹æ³• |
| **æ€§èƒ½** | âš ï¸ æ‰‹åŠ¨å®ç°å¯èƒ½æ•ˆç‡ä½ | âœ… é«˜åº¦ä¼˜åŒ– |
| **å¯è¯»æ€§** | âš ï¸ ä»£ç å†—é•¿ | âœ… ä»£ç ç®€æ´æ˜äº† |

### 5.6 å®é™…åº”ç”¨åœºæ™¯

**åœºæ™¯ 1ï¼šç»Ÿè®¡æ–‡æœ¬è¯é¢‘**

```python
from collections import Counter

# ç»Ÿè®¡æ–‡ç« ä¸­çš„è¯é¢‘
text = """
Python is a great programming language.
Python is easy to learn.
Python is powerful and versatile.
"""
words = text.lower().split()
word_count = Counter(words)
print(f"æœ€å¸¸è§çš„ 5 ä¸ªè¯ï¼š{word_count.most_common(5)}")
# è¾“å‡ºï¼šæœ€å¸¸è§çš„ 5 ä¸ªè¯ï¼š[('python', 3), ('is', 3), ('a', 1), ('great', 1), ('programming', 1)]
```

**åœºæ™¯ 2ï¼šç»Ÿè®¡æŠ•ç¥¨ç»“æœ**

```python
from collections import Counter

# ç»Ÿè®¡æŠ•ç¥¨ç»“æœ
votes = ['å¼ ä¸‰', 'æå››', 'å¼ ä¸‰', 'ç‹äº”', 'æå››', 'å¼ ä¸‰', 'å¼ ä¸‰']
vote_count = Counter(votes)
winner = vote_count.most_common(1)[0]
print(f"è·èƒœè€…ï¼š{winner[0]}ï¼Œå¾—ç¥¨æ•°ï¼š{winner[1]}")  # è¾“å‡ºï¼šè·èƒœè€…ï¼šå¼ ä¸‰ï¼Œå¾—ç¥¨æ•°ï¼š4
```

**åœºæ™¯ 3ï¼šæŸ¥æ‰¾é‡å¤å…ƒç´ **

```python
from collections import Counter

# æŸ¥æ‰¾åˆ—è¡¨ä¸­é‡å¤çš„å…ƒç´ 
numbers = [1, 2, 3, 2, 1, 3, 1, 1, 2, 4]
count = Counter(numbers)
duplicates = [num for num, cnt in count.items() if cnt > 1]
print(f"é‡å¤çš„å…ƒç´ ï¼š{duplicates}")  # è¾“å‡ºï¼šé‡å¤çš„å…ƒç´ ï¼š[1, 2, 3]
```

**åœºæ™¯ 4ï¼šå¯¹æ¯”ä¸¤ä¸ªåºåˆ—çš„å·®å¼‚**

```python
from collections import Counter

# å¯¹æ¯”ä¸¤ä¸ªåˆ—è¡¨çš„å·®å¼‚
list1 = ['a', 'b', 'c', 'a', 'b']
list2 = ['a', 'b', 'c', 'd']

c1 = Counter(list1)
c2 = Counter(list2)

# æ‰¾å‡º list1 ä¸­æœ‰ä½† list2 ä¸­æ²¡æœ‰çš„
diff = c1 - c2
print(f"list1 å¤šå‡ºçš„å…ƒç´ ï¼š{dict(diff)}")  # è¾“å‡ºï¼šlist1 å¤šå‡ºçš„å…ƒç´ ï¼š{'a': 1, 'b': 1}

# æ‰¾å‡º list2 ä¸­æœ‰ä½† list1 ä¸­æ²¡æœ‰çš„
diff2 = c2 - c1
print(f"list2 å¤šå‡ºçš„å…ƒç´ ï¼š{dict(diff2)}")  # è¾“å‡ºï¼šlist2 å¤šå‡ºçš„å…ƒç´ ï¼š{'d': 1}
```

## 6. å¯¹æ¯”ç¤ºä¾‹ï¼šä¸ä½¿ç”¨ collections çš„é—®é¢˜

### 6.1 namedtuple vs æ™®é€šå…ƒç»„å¯¹æ¯”

**é—®é¢˜åœºæ™¯**ï¼šè¡¨ç¤ºä¸€ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼ˆå§“åã€å¹´é¾„ã€æˆç»©ï¼‰ã€‚

**ä¸ä½¿ç”¨ namedtupleï¼ˆæ™®é€šå…ƒç»„ï¼‰**ï¼š

```python
# âŒ é—®é¢˜ï¼šä¸çŸ¥é“æ¯ä¸ªç´¢å¼•ä»£è¡¨ä»€ä¹ˆå«ä¹‰
student1 = ('å¼ ä¸‰', 18, 85)
student2 = ('æå››', 19, 92)

# âŒ å®¹æ˜“å‡ºé”™ï¼šç´¢å¼•æ··æ·†
print(f"å§“åï¼š{student1[0]}, å¹´é¾„ï¼š{student1[1]}, æˆç»©ï¼š{student1[2]}")

# âŒ ä¸ç›´è§‚ï¼šéœ€è¦è®°ä½ç´¢å¼•å«ä¹‰
# å¦‚æœå­—æ®µé¡ºåºæ”¹å˜ï¼Œä»£ç ä¼šå‡ºé”™
```

**ä½¿ç”¨ namedtuple**ï¼š

```python
from collections import namedtuple

# âœ… è§£å†³æ–¹æ¡ˆï¼šå­—æ®µåæ¸…æ™°æ˜äº†
Student = namedtuple('Student', ['name', 'age', 'score'])
student1 = Student('å¼ ä¸‰', 18, 85)
student2 = Student('æå››', 19, 92)

# âœ… ç›´è§‚æ¸…æ™°ï¼šé€šè¿‡å­—æ®µåè®¿é—®
print(f"å§“åï¼š{student1.name}, å¹´é¾„ï¼š{student1.age}, æˆç»©ï¼š{student1.score}")

# âœ… ä¸å®¹æ˜“å‡ºé”™ï¼šå­—æ®µåä¸ä¼šæ··æ·†
```

### 6.2 defaultdict vs æ™®é€šå­—å…¸å¯¹æ¯”

**é—®é¢˜åœºæ™¯**ï¼šç»Ÿè®¡åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚

**ä¸ä½¿ç”¨ defaultdictï¼ˆæ™®é€šå­—å…¸ï¼‰**ï¼š

```python
# âŒ é—®é¢˜ï¼šéœ€è¦æ‰‹åŠ¨æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
numbers = [1, 2, 3, 2, 1, 3, 1, 1, 2]
count = {}

for num in numbers:
    if num in count:  # âŒ éœ€è¦æ¯æ¬¡åˆ¤æ–­
        count[num] += 1
    else:
        count[num] = 1

print(count)  # è¾“å‡ºï¼š{1: 4, 2: 3, 3: 2}
```

**ä½¿ç”¨ defaultdict**ï¼š

```python
from collections import defaultdict

# âœ… è§£å†³æ–¹æ¡ˆï¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼
numbers = [1, 2, 3, 2, 1, 3, 1, 1, 2]
count = defaultdict(int)

for num in numbers:
    count[num] += 1  # âœ… ä¸éœ€è¦åˆ¤æ–­ï¼Œè‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼

print(dict(count))  # è¾“å‡ºï¼š{1: 4, 2: 3, 3: 2}
```

**å¦ä¸€ä¸ªé—®é¢˜åœºæ™¯**ï¼šæŒ‰åŸå¸‚åˆ†ç»„å­¦ç”Ÿã€‚

**ä¸ä½¿ç”¨ defaultdictï¼ˆæ™®é€šå­—å…¸ï¼‰**ï¼š

```python
# âŒ é—®é¢˜ï¼šéœ€è¦æ‰‹åŠ¨æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
students = [
    ('å¼ ä¸‰', 'åŒ—äº¬'),
    ('æå››', 'ä¸Šæµ·'),
    ('ç‹äº”', 'åŒ—äº¬')
]

city_students = {}
for name, city in students:
    if city not in city_students:  # âŒ éœ€è¦æ¯æ¬¡åˆ¤æ–­
        city_students[city] = []
    city_students[city].append(name)

print(city_students)  # è¾“å‡ºï¼š{'åŒ—äº¬': ['å¼ ä¸‰', 'ç‹äº”'], 'ä¸Šæµ·': ['æå››']}
```

**ä½¿ç”¨ defaultdict**ï¼š

```python
from collections import defaultdict

# âœ… è§£å†³æ–¹æ¡ˆï¼šè‡ªåŠ¨åˆ›å»ºç©ºåˆ—è¡¨
students = [
    ('å¼ ä¸‰', 'åŒ—äº¬'),
    ('æå››', 'ä¸Šæµ·'),
    ('ç‹äº”', 'åŒ—äº¬')
]

city_students = defaultdict(list)
for name, city in students:
    city_students[city].append(name)  # âœ… ä¸éœ€è¦åˆ¤æ–­ï¼Œè‡ªåŠ¨åˆ›å»ºç©ºåˆ—è¡¨

print(dict(city_students))  # è¾“å‡ºï¼š{'åŒ—äº¬': ['å¼ ä¸‰', 'ç‹äº”'], 'ä¸Šæµ·': ['æå››']}
```

### 6.3 Counter vs æ‰‹åŠ¨ç»Ÿè®¡å¯¹æ¯”

**é—®é¢˜åœºæ™¯**ï¼šç»Ÿè®¡å•è¯å‡ºç°æ¬¡æ•°ï¼Œå¹¶æ‰¾å‡ºå‡ºç°æœ€å¤šçš„ 3 ä¸ªã€‚

**ä¸ä½¿ç”¨ Counterï¼ˆæ‰‹åŠ¨ç»Ÿè®¡ï¼‰**ï¼š

```python
# âŒ é—®é¢˜ï¼šéœ€è¦æ‰‹åŠ¨å¾ªç¯ã€åˆ¤æ–­ã€æ’åº
words = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple', 'grape']
word_count = {}

# âŒ æ‰‹åŠ¨ç»Ÿè®¡
for word in words:
    if word in word_count:
        word_count[word] += 1
    else:
        word_count[word] = 1

# âŒ æ‰‹åŠ¨æ’åºè·å–æœ€å¤šçš„
sorted_words = sorted(word_count.items(), key=lambda x: x[1], reverse=True)
top_3 = sorted_words[:3]

print(top_3)  # è¾“å‡ºï¼š[('apple', 3), ('banana', 2), ('orange', 1)]
```

**ä½¿ç”¨ Counter**ï¼š

```python
from collections import Counter

# âœ… è§£å†³æ–¹æ¡ˆï¼šä¸€è¡Œä»£ç å®Œæˆç»Ÿè®¡å’Œæ’åº
words = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple', 'grape']
word_count = Counter(words)
top_3 = word_count.most_common(3)

print(top_3)  # è¾“å‡ºï¼š[('apple', 3), ('banana', 2), ('orange', 1)]
```

**å¯¹æ¯”æ€»ç»“**ï¼š

| ç‰¹æ€§ | ä¸ä½¿ç”¨ collections | ä½¿ç”¨ collections |
|------|-------------------|-----------------|
| **ä»£ç è¡Œæ•°** | âŒ éœ€è¦å¤šè¡Œä»£ç  | âœ… ä»£ç æ›´ç®€æ´ |
| **å¯è¯»æ€§** | âš ï¸ éœ€è¦ç†è§£å¾ªç¯é€»è¾‘ | âœ… è¯­ä¹‰æ¸…æ™° |
| **é”™è¯¯é£é™©** | âŒ å®¹æ˜“å‡ºé”™ï¼ˆç´¢å¼•æ··æ·†ã€é”®åˆ¤æ–­ï¼‰ | âœ… é™ä½é”™è¯¯é£é™© |
| **ç»´æŠ¤æ€§** | âŒ ä»£ç å†—é•¿éš¾ç»´æŠ¤ | âœ… ä»£ç ç®€æ´æ˜“ç»´æŠ¤ |

## 7. ä¸‰ç§å·¥å…·çš„é€‰æ‹©å»ºè®®

### 7.1 ä½¿ç”¨åœºæ™¯å¯¹æ¯”è¡¨æ ¼

**é€‰æ‹©å»ºè®®è¡¨æ ¼**ï¼š

| å·¥å…· | é€‚ç”¨åœºæ™¯ | å…¸å‹åº”ç”¨ | é€‰æ‹©æ¡ä»¶ |
|------|---------|---------|---------|
| **namedtuple** | éœ€è¦ä¸ºå…ƒç»„å…ƒç´ å‘½åï¼Œæé«˜å¯è¯»æ€§ | åæ ‡ç‚¹ã€å­¦ç”Ÿä¿¡æ¯ã€é…ç½®é¡¹ | âœ… éœ€è¦ä¸å¯å˜æ•°æ®<br/>âœ… éœ€è¦å­—æ®µåè®¿é—®<br/>âœ… éœ€è¦æé«˜ä»£ç å¯è¯»æ€§ |
| **defaultdict** | éœ€è¦è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼ï¼Œé¿å… KeyError | åˆ†ç»„ç»Ÿè®¡ã€æ„å»ºç´¢å¼•ã€è®¡æ•°åˆå§‹åŒ– | âœ… éœ€è¦è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼<br/>âœ… é¢‘ç¹è®¿é—®å¯èƒ½ä¸å­˜åœ¨çš„é”®<br/>âœ… éœ€è¦ç®€åŒ–ä»£ç é€»è¾‘ |
| **Counter** | éœ€è¦ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•° | è¯é¢‘ç»Ÿè®¡ã€æŠ•ç¥¨ç»Ÿè®¡ã€æŸ¥æ‰¾é‡å¤ | âœ… éœ€è¦ç»Ÿè®¡è®¡æ•°<br/>âœ… éœ€è¦æ’åºå’Œç­›é€‰<br/>âœ… éœ€è¦é¢‘ç¹ç»Ÿè®¡æ“ä½œ |

### 7.2 é€‰æ‹©æµç¨‹å›¾

**é€‰æ‹©æµç¨‹è¯´æ˜**ï¼šä¸‹é¢çš„æµç¨‹å›¾å¸®åŠ©ä½ æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ collections å·¥å…·ã€‚

```mermaid
graph TD
    Start["éœ€è¦å¤„ç†æ•°æ®"] --> Q1{"éœ€è¦å‘½åå­—æ®µï¼Ÿ"}
    Q1 -->|æ˜¯| NamedTuple["ä½¿ç”¨ namedtuple<br/>ï¼ˆåæ ‡ç‚¹ã€é…ç½®é¡¹ï¼‰"]
    Q1 -->|å¦| Q2{"éœ€è¦è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼ï¼Ÿ"}
    Q2 -->|æ˜¯| DefaultDict["ä½¿ç”¨ defaultdict<br/>ï¼ˆåˆ†ç»„ã€ç´¢å¼•ï¼‰"]
    Q2 -->|å¦| Q3{"éœ€è¦ç»Ÿè®¡è®¡æ•°ï¼Ÿ"}
    Q3 -->|æ˜¯| Counter["ä½¿ç”¨ Counter<br/>ï¼ˆè¯é¢‘ã€æŠ•ç¥¨ï¼‰"]
    Q3 -->|å¦| Normal["ä½¿ç”¨å†…ç½®ç±»å‹<br/>ï¼ˆlistã€dictã€tupleï¼‰"]
    
    style NamedTuple fill:#e8f5e9,stroke:#388e3c
    style DefaultDict fill:#e1f5fe,stroke:#0288d1
    style Counter fill:#fff3e0,stroke:#f57c00
    style Normal fill:#f5f5f5,stroke:#9e9e9e
```

**å¿«é€Ÿé€‰æ‹©æŒ‡å—**ï¼š

1. **namedtuple**ï¼šå½“ä½ éœ€è¦å…ƒç»„çš„ä¸å¯å˜æ€§ï¼Œä½†åˆæƒ³è¦å­—æ®µåè®¿é—®æ—¶
2. **defaultdict**ï¼šå½“ä½ éœ€è¦å­—å…¸ï¼Œä½†ç»å¸¸è®¿é—®å¯èƒ½ä¸å­˜åœ¨çš„é”®æ—¶
3. **Counter**ï¼šå½“ä½ éœ€è¦ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°ï¼Œå¹¶å¯èƒ½è¿›è¡Œæ’åºç­›é€‰æ—¶

## 8. å¸¸è§é”™è¯¯ä¸ä¿®æ­£

### 8.1 namedtuple å¸¸è§é”™è¯¯

**é”™è¯¯ 1ï¼šå°è¯•ä¿®æ”¹ namedtuple çš„å€¼**

```python
from collections import namedtuple

Point = namedtuple('Point', ['x', 'y'])
p = Point(1, 2)

# âŒ é”™è¯¯ï¼šnamedtuple æ˜¯ä¸å¯å˜çš„
p.x = 3  # AttributeError: can't set attribute
```

**âœ… ä¿®æ­£**ï¼šnamedtuple æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œåˆ›å»ºæ–°å®ä¾‹ï¼š

```python
from collections import namedtuple

Point = namedtuple('Point', ['x', 'y'])
p = Point(1, 2)

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ _replace() æ–¹æ³•åˆ›å»ºæ–°å®ä¾‹
p = p._replace(x=3)
print(p)  # è¾“å‡ºï¼šPoint(x=3, y=2)
```

**é”™è¯¯ 2ï¼šå­—æ®µåä¸ç¬¦åˆ Python æ ‡è¯†ç¬¦è§„èŒƒ**

```python
from collections import namedtuple

# âŒ é”™è¯¯ï¼šå­—æ®µåä¸èƒ½ä»¥æ•°å­—å¼€å¤´
Point = namedtuple('Point', ['1x', '2y'])  # ValueError
```

**âœ… ä¿®æ­£**ï¼šå­—æ®µåå¿…é¡»æ˜¯æœ‰æ•ˆçš„ Python æ ‡è¯†ç¬¦ï¼š

```python
from collections import namedtuple

# âœ… æ­£ç¡®ï¼šä½¿ç”¨æœ‰æ•ˆçš„æ ‡è¯†ç¬¦
Point = namedtuple('Point', ['x1', 'y2'])
```

### 8.2 defaultdict å¸¸è§é”™è¯¯

**é”™è¯¯ 1ï¼šå¿˜è®°ä¼ å…¥å·¥å‚å‡½æ•°**

```python
from collections import defaultdict

# âŒ é”™è¯¯ï¼šdefaultdict() éœ€è¦ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ä½œä¸ºå‚æ•°
d = defaultdict()  # TypeError: first argument must be callable or None

# âŒ é”™è¯¯ï¼šä¼ å…¥äº†å€¼è€Œä¸æ˜¯å·¥å‚å‡½æ•°
d = defaultdict(0)  # TypeError: first argument must be callable or None
```

**âœ… ä¿®æ­£**ï¼šä¼ å…¥å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°æˆ–ç±»ï¼‰ï¼š

```python
from collections import defaultdict

# âœ… æ­£ç¡®ï¼šä¼ å…¥ intï¼ˆå¯è°ƒç”¨å¯¹è±¡ï¼‰
d = defaultdict(int)

# âœ… æ­£ç¡®ï¼šä¼ å…¥ lambda å‡½æ•°
d = defaultdict(lambda: "é»˜è®¤å€¼")
```

**é”™è¯¯ 2ï¼šè¯¯ä»¥ä¸ºé»˜è®¤å€¼ä¼šæå‰åˆ›å»º**

```python
from collections import defaultdict

d = defaultdict(int)
print(len(d))  # è¾“å‡ºï¼š0ï¼ˆé»˜è®¤å€¼ä¸ä¼šæå‰åˆ›å»ºï¼‰

# âœ… åªæœ‰è®¿é—®ä¸å­˜åœ¨çš„é”®æ—¶æ‰ä¼šåˆ›å»ºé»˜è®¤å€¼
print(d['key'])  # è¾“å‡ºï¼š0ï¼ˆæ­¤æ—¶æ‰åˆ›å»ºï¼‰
print(len(d))  # è¾“å‡ºï¼š1
```

### 8.3 Counter å¸¸è§é”™è¯¯

**é”™è¯¯ 1ï¼šå¯¹ Counter è¿›è¡Œé”™è¯¯çš„æ•°å­¦è¿ç®—**

```python
from collections import Counter

c1 = Counter(a=3, b=2)
c2 = Counter(a=1, b=3)

# âš ï¸ æ³¨æ„ï¼šå‡æ³•å¯èƒ½äº§ç”Ÿè´Ÿå€¼æˆ–é›¶å€¼
result = c1 - c2
print(result)  # è¾“å‡ºï¼šCounter({'a': 2})ï¼ˆ'b' è¢«ç§»é™¤äº†ï¼Œå› ä¸ºç»“æœä¸º 0 æˆ–è´Ÿï¼‰

# âœ… å¦‚æœä¸æƒ³ç§»é™¤ï¼Œä½¿ç”¨ subtract() æ–¹æ³•
c1.subtract(c2)
print(c1)  # è¾“å‡ºï¼šCounter({'a': 2, 'b': -1})ï¼ˆä¿ç•™è´Ÿå€¼ï¼‰
```

**é”™è¯¯ 2ï¼šæ··æ·† Counter å’Œå­—å…¸çš„æ“ä½œ**

```python
from collections import Counter

c = Counter('abracadabra')

# âœ… Counter è®¿é—®ä¸å­˜åœ¨çš„é”®è¿”å› 0ï¼Œä¸ä¼šæŠ¥é”™
print(c['x'])  # è¾“å‡ºï¼š0

# âœ… ä½†æ˜¯ï¼ŒCounter çš„æŸäº›æ“ä½œä¸å­—å…¸ä¸åŒ
# Counter çš„é”®åªèƒ½æ˜¯å¯å“ˆå¸Œå¯¹è±¡
c[(1, 2)] = 5  # âœ… å…ƒç»„æ˜¯å¯å“ˆå¸Œçš„ï¼Œå¯ä»¥
# c[[1, 2]] = 5  # âŒ åˆ—è¡¨ä¸å¯å“ˆå¸Œï¼Œä¼šæŠ¥é”™
```

## 9. æ€»ç»“ä¸å±•æœ›

### 9.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾

é€šè¿‡æœ¬æŒ‡å—çš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº† collections æ¨¡å—ä¸­ä¸‰ä¸ªæœ€é‡è¦çš„å·¥å…·ï¼š

1. **namedtupleï¼ˆå‘½åå…ƒç»„ï¼‰**ï¼š
   - å¸¦å­—æ®µåçš„å…ƒç»„ï¼Œæé«˜ä»£ç å¯è¯»æ€§
   - ä¸å¯å˜ï¼Œå†…å­˜æ•ˆç‡é«˜
   - é€‚ç”¨äºéœ€è¦ä¸ºå…ƒç»„å…ƒç´ å‘½åçš„åœºæ™¯

2. **defaultdictï¼ˆé»˜è®¤å­—å…¸ï¼‰**ï¼š
   - è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼çš„å­—å…¸
   - é¿å… KeyErrorï¼Œç®€åŒ–ä»£ç é€»è¾‘
   - é€‚ç”¨äºéœ€è¦è‡ªåŠ¨åˆ›å»ºé»˜è®¤å€¼çš„åœºæ™¯

3. **Counterï¼ˆè®¡æ•°å™¨ï¼‰**ï¼š
   - ä¸“ä¸šçš„ç»Ÿè®¡å·¥å…·
   - è‡ªåŠ¨ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°
   - æä¾›ä¸°å¯Œçš„ç»Ÿè®¡å’Œæ“ä½œæ–¹æ³•

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- âœ… **ä»£ç ç®€æ´**ï¼šå‡å°‘å†—ä½™ä»£ç ï¼Œæé«˜å¯è¯»æ€§
- âœ… **åŠŸèƒ½å¼ºå¤§**ï¼šé’ˆå¯¹ç‰¹å®šåœºæ™¯ä¼˜åŒ–
- âœ… **æ˜“äºä½¿ç”¨**ï¼šAPI ç®€å•ç›´è§‚
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šé«˜åº¦ä¼˜åŒ–çš„å®ç°

### 9.2 ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘

å®Œæˆæœ¬é˜¶æ®µçš„å­¦ä¹ åï¼Œå»ºè®®æŒ‰ç…§ä»¥ä¸‹é¡ºåºç»§ç»­å­¦ä¹ ï¼š

1. **ç»§ç»­å­¦ä¹  collections æ¨¡å—**ï¼ˆP2Kï¼‰ï¼šå­¦ä¹  `deque` å’Œ `OrderedDict`
2. **å­¦ä¹ å‡½æ•°è¿›é˜¶**ï¼ˆP3B-P3Fï¼‰ï¼šå­¦ä¹ å‚æ•°ç±»å‹ã€Lambda è¡¨è¾¾å¼ã€å†…ç½®å‡½æ•°
3. **å­¦ä¹ æ¨¡å—ä¸åŒ…**ï¼ˆP3G-P3Iï¼‰ï¼šæ·±å…¥ç†è§£æ¨¡å—å¯¼å…¥æœºåˆ¶

**å­¦ä¹ å»ºè®®**ï¼š
- âœ… **å¤šå®è·µ**ï¼šå°è¯•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›å·¥å…·
- âœ… **å¤šå¯¹æ¯”**ï¼šæ€è€ƒä½¿ç”¨ collections å·¥å…·å‰åçš„ä»£ç å·®å¼‚
- âœ… **å¤šæ€è€ƒ**ï¼šç†è§£æ¯ä¸ªå·¥å…·çš„é€‚ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·

### 9.3 é¼“åŠ±ä¸å±•æœ›

collections æ¨¡å—æ˜¯ Python æ ‡å‡†åº“ä¸­çš„ç²¾åï¼ŒæŒæ¡è¿™äº›å·¥å…·èƒ½è®©ä½ ç¼–å†™å‡ºæ›´ä¼˜é›…ã€æ›´é«˜æ•ˆçš„ä»£ç ã€‚namedtupleã€defaultdict å’Œ Counter æ˜¯ Python ç¨‹åºå‘˜æ—¥å¸¸å·¥ä½œä¸­æœ€å¸¸ç”¨çš„å·¥å…·ä¹‹ä¸€ï¼Œå®ƒä»¬èƒ½æ˜¾è‘—æå‡ä½ çš„ç¼–ç¨‹æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

**è®°ä½**ï¼š
- namedtuple = å¸¦æ ‡ç­¾çš„å‚¨ç‰©ç›’ï¼Œè®©ä»£ç æ›´æ¸…æ™°
- defaultdict = è‡ªåŠ¨è¡¥å……çš„ä»“åº“ï¼Œè®©ä»£ç æ›´ç®€æ´
- Counter = ä¸“ä¸šçš„ç»Ÿè®¡å™¨ï¼Œè®©ç»Ÿè®¡æ›´è½»æ¾

ç»§ç»­åŠ æ²¹ï¼Œä½ å·²ç»æŒæ¡äº† collections æ¨¡å—çš„æ ¸å¿ƒå·¥å…·ï¼æ¥ä¸‹æ¥ï¼Œä½ å°†å­¦ä¹ æ›´å¤šé«˜çº§çš„æ•°æ®ç»“æ„å’Œç¼–ç¨‹æŠ€å·§ï¼Œè¿›ä¸€æ­¥æå‡ Python ç¼–ç¨‹èƒ½åŠ›ï¼

**ç»§ç»­åŠ æ²¹ï¼Œä½ ç¦» Python é«˜æ‰‹åˆè¿‘äº†ä¸€æ­¥ï¼** ğŸš€

---


## 10. ğŸ“š å‚è€ƒèµ„æ–™ä¸å­¦ä¹ èµ„æº

### 10.1 å®˜æ–¹æ–‡æ¡£

**collections æ¨¡å—å®˜æ–¹æ–‡æ¡£**ï¼š
- [Python collections æ¨¡å—å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/library/collections.html) - collections æ¨¡å—å®Œæ•´æ–‡æ¡£
- [namedtuple å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/library/collections.html#collections.namedtuple) - namedtuple è¯¦ç»†è¯´æ˜
- [defaultdict å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/library/collections.html#collections.defaultdict) - defaultdict è¯¦ç»†è¯´æ˜
- [Counter å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/library/collections.html#collections.Counter) - Counter è¯¦ç»†è¯´æ˜

### 10.2 åœ¨çº¿æ•™ç¨‹

**ä¸­æ–‡æ•™ç¨‹**ï¼š
- [Python collections æ¨¡å—æ•™ç¨‹ - èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/python3/python-collections.html) - ä¸­æ–‡å…¥é—¨æ•™ç¨‹
- [Python collections æ¨¡å—è¯¦è§£ - å»–é›ªå³°](https://www.liaoxuefeng.com/wiki/1016959663602400/1017681679479008) - é€šä¿—æ˜“æ‡‚çš„æ•™ç¨‹

**è‹±æ–‡æ•™ç¨‹**ï¼š
- [Python collections Module - Real Python](https://realpython.com/python-collections-module/) - è¯¦ç»†çš„è‹±æ–‡æ•™ç¨‹
- [Python Counter - GeeksforGeeks](https://www.geeksforgeeks.org/python-counter-objects-elements/) - Counter ä½¿ç”¨ç¤ºä¾‹

### 10.3 æ¨èä¹¦ç±

**å…¥é—¨ä¹¦ç±**ï¼š
- ã€ŠPython ç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°å®è·µã€‹- Eric Matthesï¼ˆåŒ…å« collections æ¨¡å—ä»‹ç»ï¼‰
- ã€ŠPython åŸºç¡€æ•™ç¨‹ï¼ˆç¬¬ 3 ç‰ˆï¼‰ã€‹- Magnus Lie Hetland

**è¿›é˜¶ä¹¦ç±**ï¼š
- ã€Šæµç•…çš„ Pythonã€‹- Luciano Ramalhoï¼ˆæ·±å…¥è®²è§£ collections æ¨¡å—ï¼‰
- ã€ŠEffective Pythonï¼šç¼–å†™é«˜è´¨é‡ Python ä»£ç çš„ 59 ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹- Brett Slatkinï¼ˆåŒ…å« collections æœ€ä½³å®è·µï¼‰

---

**å¦é—¨å·¥å­¦é™¢äººå·¥æ™ºèƒ½åˆ›ä½œåŠ -- éƒ‘æ©èµ**  
**2025 å¹´ 11 æœˆ 03 æ—¥**

